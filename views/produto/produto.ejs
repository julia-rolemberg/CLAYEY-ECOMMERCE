<div class="produtoPagina">
    <div name="pagina" class="container-md pt-3 border container-fluid ">
        <div class="row">

            <div id="img-container" class="container-md col-md-6">
                <div><img id="" class="w-100 h-100 mx-auto" src="/imagens/<%=id%>/main.jpg"/></div>
                <div id="img-grid" class="mt-2 row">
                    <% for(let item = 2; item <= 5; item++) { %>
                        <img style="max-height: 100%;" class="col-md-3 mr-auto mb-1" src="/imagens/<%=id%>/<%=item%>.jpg"/>
                    <% } %>

                </div>
            </div>


            <div name="text-container" class="container-md col-md-6">
                <div>
                    <div id="title" class="text-left h1 text-secondary">Nome do Produto</div>
                    <div id="price" class="text-left h2 text-secondary">R$ valor</div>
                    <!-- <div id="stars" class="text-left"></div>     -->
                </div>

                <form class="form-inline">
                    <div name="bag-container" class="container-sm p-0 my-5 row">
                        <div class="input-group col">

                            <button type="button" id="minus" class="btn btn-outline-light text-dark input-group-append" onclick="process(-1)">-</button>
                            <input id="quant-text" class="form-control" type="number" value="1"/>
                            <button type="button" id="plus" class="btn btn-outline-light text-dark input-group-append" onclick="process(1)">+</button>
                        </div>

                        <div class="col">
                            <button type="button" class="add-to-cart btn btn-success btn-block">
                                Adicionar ao carrinho
                            </button>
                        </div>

                    </div>
                </form>

                
                <div name="description-container" class="p-3 m-3">
                    <div>
                        <div class="d-flex">
                            <button type="button" id="d-btn1" class="btn btn-block text-justify border-bottom" onclick="hide('desc-text')">
                                Descrição</button>

                            <button type="button" id="d-btn2" class="btn text-right border-bottom ml-auto" onclick="hide('desc-text')">
                                +</button>
                        </div>

                        <div id="desc-text" class="p-3 sr-only">
                            <p id="d-text" class="text-justify">
                                Texto-descrição</p> 
                        </div>
                    </div>

                    <div>
                        <div class="d-flex">
                            <button type="button" id="u-btn1" class="btn btn-block text-justify border-bottom" onclick="hide('util-text')">
                                Como utilizar</button>
                            <button type="button" id="u-btn2" class="btn text-right border-bottom ml-auto" onclick="hide('util-text')">
                                +</button>
                        </div>

                        <div id="util-text" class="p-3 sr-only">
                            <p id="u-text" class="text-justify">
                                Texto-utilizar</p>
                        </div>
                    </div>

                    <div>
                        <div class="d-flex">
                            <button type="button" id="c-btn1" class="btn btn-block text-justify border-bottom" onclick="hide('comp-text')">
                                Composição</button>
                            <button type="button" id="c-btn2" class="btn text-right border-bottom ml-auto" onclick="hide('comp-text')">
                                +</button>
                        </div>

                        <div id="comp-text" class="p-3 sr-only">
                            <p id="c-text" class="text-justify">
                                Texto-composição</p> 
                        </div>
                    </div>
    
                </div>
    
            </div>    
        </div>
        
    </div>
</div>


<script name="produto">
    const title = document.getElementById("title");
    const price = document.getElementById("price");
    const starsContainer = document.getElementById("stars");
    const descriptionText = document.getElementById("d-text");
    const utilityText = document.getElementById("u-text");
    const compositionText = document.getElementById("c-text");
    const quantity = document.getElementById("quant-text");
    const produto = {
        "id": 1,
        "nome": "Argila Vermelha",
        "preco": 40.5,
        "estrelas": 4,
        "descricao": "um sabonete de argila vermelha",
        "utilidade": "passe no corpo",
        "composicao": "50% argila vermelha, 30% soda caustica e 20% carinho de mãe",
        "imagens": [
            "/imagens/1/main.jpg",
            "/imagens/1/main.jpg",
            "/imagens/1/main.jpg",
            "/imagens/1/main.jpg",
            "/imagens/1/main.jpg"
        ]
    };

    function mostrarProduto() {
        title.textContent = produto.nome;
        price.textContent = (produto.preco).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        descriptionText.textContent = produto.descricao;
        utilityText.textContent = produto.utilidade;
        compositionText.textContent = produto.composicao;
    }

    function process(quant){
        var value = parseInt(document.getElementById("quant-text").value);
        value+=quant;
        if(value < 1 || !(parseInt(value)) ){
            document.getElementById("quant-text").value = 1;
        }else{
            document.getElementById("quant-text").value = value;
        }
    }

    function hide(id){
        let iten = document.getElementById(id)
        let active = iten.classList.contains("sr-only")
        
        if(active) {
            iten.classList.remove("sr-only")
        } else {
            iten.classList.add("sr-only")
        }
    }

    $('.add-to-cart').click(function(event) {
        shoppingCart.addItemToCart(produto.id, produto.nome, produto.preco, parseInt(quantity.value), produto.imagens[0]);
        exibirCarrinho();
    });

    mostrarProduto();
</script>
