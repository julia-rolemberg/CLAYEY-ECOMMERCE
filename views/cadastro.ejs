<% titulo = "Cadastro" %>


<div class="fundoBase">

	<div id="containerCadastro" class="mx-auto p-4 shadow bg-light">
		<h4 id="tituloAcesso">Fazer cadastro</h4>

		<form id="form" class="form-group">
			<div class="input-group flex-nowrap">
				<!-- <div class="input-group-prepend">
					<span class="input-group-text" id="addon-wrapping">perfil</span>
				</div> -->
				<input type="text" id="nome_cliente" name="nome_cliente" class="form-control"
					placeholder="nome completo" aria-label="nome completo" aria-describedby="addon-wrapping"
					required="required">
			</div>
			<div class="input-group flex-nowrap mt-3">
				<input type="email" id="email" name="email" class="form-control" placeholder="e-mail" aria-label="email"
					aria-describedby="addon-wrapping" required="required">
			</div>
			<div class="input-group flex-nowrap mt-3">
				<input type="password" id="senha" name="senha" class="form-control" placeholder="senha"
					aria-label="senha" aria-describedby="addon-wrapping" required="required">
				<input type="password" id="csenha" class="form-control" placeholder="confirmar senha"
					aria-label="confirma_senha" aria-describedby="addon-wrapping" required="required">
			</div>

			<div class=" d-flex justify-content-between ">
				<input type="submit" class="btn btn-success px-4 mt-4" value="confirmar" />
			</div>

			<span class="font-weight-light font-italic" style="font-size: 14px;"
				onclick="window.location.href='/login'"><a>ou faça login</a></span>
		</form>
	</div>

</div>

<script type="text/javascript">


	$("#form").validate({
		rules: {
			nome_cliente: {
				required: true,
				minlength: 3,
				maxlength: 45
			},
			email: {
				required: true,
				minlength: 10,
				email: true
			},
			senha: {
				required: true,
				minlength: 3,
				maxlength: 40
			},
			csenha: {
				required: true,
				minlength: 3,
				maxlength: 40,
				equalTo: "#senha"
			}
		},

		submitHandler: function () {
			
			
			let opcoes = {
                url:("/api/cliente/criar"),
               
                method:"POST",
				data: $("form").serialize(),
				
                success: function(dadosDeRetorno){
					alert("Cadastro realizado com sucesso! ");
					window.location.href = "/";
                },
                error: function(){
					alert("Cliente já cadastrado, faça login!");
					window.location.href = "/login";

                }

            };
            $.ajax(opcoes);
            }



		}
	);


</script>